<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecos de la Mazmorra - Motor de Novela Gráfica</title>
    <!-- Tipografía temática -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Merriweather:ital,wght@0,300;0,700;1,300&display=swap" rel="stylesheet">
    
    <style>
        /* --- ESTILOS TEMÁTICOS (DARK FANTASY) --- */
        :root {
            --bg-color: #050505;
            --panel-bg: #121212;
            --text-main: #d1d5db;
            --text-highlight: #f3f4f6;
            --accent-red: #7f1d1d;
            --accent-gold: #b45309;
            --border-color: #444;
            --font-display: 'Cinzel', serif;
            --font-body: 'Merriweather', serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-body);
            height: 100vh;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* Contenedor Principal */
        #game-engine {
            width: 100%;
            max-width: 900px;
            height: 95vh;
            background: var(--panel-bg);
            border: 1px solid var(--border-color);
            box-shadow: 0 0 60px rgba(0,0,0,0.8);
            display: grid;
            grid-template-rows: 50% 1fr auto;
            position: relative;
        }

        /* Zona Visual */
        .viewport {
            position: relative;
            background: #000;
            overflow: hidden;
            border-bottom: 2px solid var(--accent-gold);
        }

        .viewport img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: opacity 0.5s ease-in-out;
            opacity: 1;
        }
        
        .viewport img.loading {
            opacity: 0;
        }

        /* Overlay de Debug (Para ver tus Prompts) */
        .debug-prompt {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.85);
            color: #00ff9d;
            font-family: monospace;
            font-size: 0.75rem;
            padding: 10px;
            opacity: 0;
            transition: opacity 0.3s;
            pointer-events: none;
            border-top: 1px solid #00ff9d;
        }
        
        .viewport:hover .debug-prompt {
            opacity: 1;
        }

        /* Zona Narrativa */
        .narrative-box {
            padding: 2rem;
            overflow-y: auto;
            font-size: 1.1rem;
            line-height: 1.7;
        }

        .narrative-box p {
            margin-bottom: 1rem;
            animation: fadeIn 0.8s ease-out;
        }

        /* Zona de Opciones */
        .options-box {
            padding: 1.5rem;
            background: rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            border-top: 1px solid var(--border-color);
        }

        .btn-choice {
            background: linear-gradient(90deg, #1a1a1a, #2a2a2a);
            border: 1px solid #333;
            color: var(--text-highlight);
            padding: 1rem 1.5rem;
            font-family: var(--font-display);
            font-size: 1rem;
            text-align: left;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-choice:hover {
            border-color: var(--accent-gold);
            transform: translateX(5px);
            background: linear-gradient(90deg, #2a2a2a, #3a3a3a);
        }

        /* Estilos condicionales para clases */
        .btn-choice.class-option {
            border-left: 3px solid var(--accent-gold);
        }

        .btn-choice.locked {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(1);
        }

        /* UI de Estado */
        .status-bar {
            position: absolute;
            top: 1rem;
            left: 1rem;
            background: rgba(0,0,0,0.8);
            border: 1px solid var(--accent-gold);
            padding: 0.5rem 1rem;
            font-family: var(--font-display);
            color: var(--accent-gold);
            text-transform: uppercase;
            font-size: 0.8rem;
            z-index: 10;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            #game-engine { height: 100vh; grid-template-rows: 35% 1fr auto; }
            .narrative-box { padding: 1.2rem; font-size: 1rem; }
        }
    </style>
</head>
<body>

    <div id="game-engine">
        <div class="viewport">
            <div id="ui-class" class="status-bar">Clase: Ninguna</div>
            <img id="scene-image" src="" alt="Scene">
            <div id="prompt-display" class="debug-prompt">Prompt: ...</div>
        </div>

        <div id="narrative" class="narrative-box">
            <!-- El texto se inyecta aquí -->
        </div>

        <div id="options" class="options-box">
            <!-- Los botones se inyectan aquí -->
        </div>
    </div>

    <script>
        /**
         * ------------------------------------------------------------------
         * CONFIGURACIÓN & ESTADO
         * ------------------------------------------------------------------
         */
        const STATE = {
            playerClass: null,
            currentNodeId: 1 // Empezamos en el ID 1
        };

        const CLASS_TYPES = {
            WARRIOR: 'guerrero',
            ROGUE: 'picaro',
            MAGE: 'mago',
            CLERIC: 'clerigo',    
            RANGER: 'explorador'  
        };

        /**
         * ------------------------------------------------------------------
         * BASE DE DATOS DE HISTORIA (Story Nodes)
         * ------------------------------------------------------------------
         */
        const storyNodes = [
            // --- FASE 0: CREACIÓN Y TUTORIAL ---
            {
                id: 1,
                text: "<p>El viento aúlla a través de las grietas de la montaña. Ante ti se alza la entrada prohibida a las Catacumbas de Aethelgard. Nadie ha regresado en siglos.</p><p>Antes de cruzar el umbral, reflexionas sobre el entrenamiento que te ha traído hasta aquí...</p>",
                imageGenerationPrompt: "Dark fantasy landscape. A massive, ancient stone doorway carved into a jagged mountain cliff. Stormy grey sky, fog swirling around the entrance. Runes glowing faintly in blue. Cinematic, detailed matte painting.",
                imageUrl: "https://placehold.co/900x500/111/444?text=Entrada+a+la+Mazmorra",
                options: [
                    { text: "Soy un GUERRERO, mi espada es mi ley.", nextNode: 2, setClass: CLASS_TYPES.WARRIOR },
                    { text: "Soy un PÍCARO, las sombras son mi hogar.", nextNode: 2, setClass: CLASS_TYPES.ROGUE },
                    { text: "Soy un MAGO, el conocimiento es poder.", nextNode: 2, setClass: CLASS_TYPES.MAGE },
                    { text: "Soy un CLÉRIGO, la luz divina es mi guía.", nextNode: 2, setClass: CLASS_TYPES.CLERIC },
                    { text: "Soy un EXPLORADOR, conozco cada rastro y sendero.", nextNode: 2, setClass: CLASS_TYPES.RANGER }
                ]
            },
            {
                id: 2,
                text: "<p>Desciendes por la escalera de caracol. La oscuridad es absoluta hasta que enciendes una antorcha. Llegas a una sala circular con tres caminos.</p><p>En el centro, un altar antiguo parece requerir un sacrificio o una plegaria.</p>",
                imageGenerationPrompt: "Dungeon interior. A circular stone chamber illuminated by torchlight. Three dark corridors branching off. In the center, a bloodstained stone altar with strange carvings. High contrast, ominous shadows.",
                imageUrl: "https://placehold.co/900x500/221100/orange?text=Sala+del+Altar",
                options: [
                    { text: "Examinar el camino de la izquierda (Ruido metálico).", nextNode: 3 },
                    { text: "Leer las runas del altar (Solo Mago).", nextNode: 4, requiredClass: CLASS_TYPES.MAGE },
                    { text: "Purificar el altar corrupto (Solo Clérigo).", nextNode: 9, requiredClass: CLASS_TYPES.CLERIC },
                    { text: "Buscar mecanismos ocultos en el suelo (Solo Pícaro).", nextNode: 5, requiredClass: CLASS_TYPES.ROGUE },
                    { text: "Analizar huellas en el polvo (Solo Explorador).", nextNode: 10, requiredClass: CLASS_TYPES.RANGER },
                    { text: "Ignorar todo y avanzar al frente.", nextNode: 6 }
                ]
            },
            {
                id: 3,
                text: "<p>¡Emboscada! Un esqueleto armado surge de las sombras con una espada oxidada. No hay tiempo para pensar.</p>",
                imageGenerationPrompt: "Action shot. An animated skeleton warrior lunging forward with a rusty sword. Dynamic angle, motion blur. Background is a dark dungeon corridor. Blue eyes glowing in the skull.",
                imageUrl: "https://placehold.co/900x500/300/red?text=Combate+Esqueleto",
                options: [
                    { text: "Golpear con fuerza bruta (Solo Guerrero).", nextNode: 7, requiredClass: CLASS_TYPES.WARRIOR },
                    { text: "Expulsar no-muertos (Solo Clérigo).", nextNode: 11, requiredClass: CLASS_TYPES.CLERIC },
                    { text: "Intentar esquivar y huir.", nextNode: 6 }
                ]
            },
            { id: 4, text: "<p>Descifras la inscripción arcana. Un pasadizo secreto se abre iluminado por luz azul, permitiéndote evitar las trampas.</p>", imageGenerationPrompt: "Magical effect. A stone wall sliding open to reveal a secret passage glowing with ethereal blue light.", imageUrl: "https://placehold.co/900x500/000033/cyan?text=Pasadizo+Secreto", options: [{ text: "Entrar.", nextNode: 8 }] },
            { id: 5, text: "<p>Desactivas una placa de presión y encuentras un cofre oculto con equipo mejorado. Te sientes preparado para lo que viene.</p>", imageGenerationPrompt: "Close up. Treasure chest revealing gold and potions.", imageUrl: "https://placehold.co/900x500/332200/gold?text=Tesoro+Encontrado", options: [{ text: "Continuar.", nextNode: 8 }] },
            { id: 6, text: "<p>Huyes a través del pasillo lleno de trampas. Sufres cortes profundos y pierdes parte de tu equipo, pero sobrevives de milagro.</p>", imageGenerationPrompt: "First person view. Bleeding hands, dark corridor with spikes.", imageUrl: "https://placehold.co/900x500/330000/white?text=Herido+y+Cansado", options: [{ text: "Continuar a duras penas.", nextNode: 8 }] },
            { id: 7, text: "<p>Destrozas al esqueleto de un solo golpe. Tu fuerza es inigualable.</p>", imageGenerationPrompt: "Victory. Broken bones scattered on the floor.", imageUrl: "https://placehold.co/900x500/555/fff?text=Victoria", options: [{ text: "Continuar.", nextNode: 8 }] },
            { id: 9, text: "<p>Tu plegaria purifica el altar. Una luz cálida te otorga una bendición de protección para el viaje.</p>", imageGenerationPrompt: "Holy light shining from a stone altar.", imageUrl: "https://placehold.co/900x500/FFD700/000?text=Bendicion", options: [{ text: "Avanzar.", nextNode: 8 }] },
            { id: 10, text: "<p>Sigues el rastro seguro, evitando todas las emboscadas y trampas como un fantasma.</p>", imageGenerationPrompt: "Dusty floor with footprints illuminated by a lantern.", imageUrl: "https://placehold.co/900x500/556B2F/FFF?text=Rastro+Seguro", options: [{ text: "Avanzar.", nextNode: 8 }] },
            { id: 11, text: "<p>El esqueleto se convierte en polvo ante tu fe.</p>", imageGenerationPrompt: "Skeleton disintegrating in holy light.", imageUrl: "https://placehold.co/900x500/FFF/000?text=Expulsion", options: [{ text: "Avanzar.", nextNode: 8 }] },

            // --- FASE 1: LAS PROFUNDIDADES (Plantas 1-3) - FÍSICO ---
            {
                id: 8,
                text: "<p>Abres las grandes puertas de hierro. El olor a ozono y sangre es más fuerte aquí. Has entrado en los Barracones de la Legión Oscura.</p><p>Un puente de piedra inestable cruza un abismo. Al otro lado, un grupo de Orcos bloquea el paso.</p>",
                imageGenerationPrompt: "Underground chasm. A crumbling stone bridge spanning a dark void. On the other side, a group of armored orcs with red glowing eyes waiting. Torchlight reflecting on metal armor.",
                imageUrl: "https://placehold.co/900x500/220000/red?text=Puente+de+los+Orcos",
                options: [
                    { 
                        text: "Liderar la carga en el puente (Solo Guerrero).", 
                        nextNode: 12, 
                        requiredClass: CLASS_TYPES.WARRIOR 
                    },
                    { 
                        text: "Disparar al líder Orco desde lejos (Solo Explorador).", 
                        nextNode: 12, 
                        requiredClass: CLASS_TYPES.RANGER 
                    },
                    { 
                        text: "Intentar cruzar corriendo mientras te ven.", 
                        nextNode: 21 // Nodo de daño/fracaso parcial
                    }
                ]
            },
            {
                id: 12,
                text: "<p>Tu habilidad marcial despeja el camino. Los orcos caen al vacío o mueren bajo tu acero/flechas. El puente resiste lo justo para que cruces.</p><p>Llegas al ascensor de carga que baja a las profundidades.</p>",
                imageGenerationPrompt: "Victory on a bridge. Dead orcs lying on the stone. The hero standing looking at a large wooden elevator mechanism descending into darkness.",
                imageUrl: "https://placehold.co/900x500/444/000?text=Puente+Despejado",
                options: [
                    { text: "Bajar al siguiente nivel.", nextNode: 13 }
                ]
            },

            // --- FASE 2: EL SANTUARIO OLVIDADO (Plantas 4-6) - MÁGICO ---
            {
                id: 13,
                text: "<p>El ascensor se detiene con un chirrido metálico. El aire aquí es gélido. Estás en el Osario Real.</p><p>Una niebla verde cubre el suelo. Frente a ti, un Lich menor conjura un hechizo de muerte que bloqueará la salida para siempre si no actúas YA.</p>",
                imageGenerationPrompt: "Crypt interior. Green ominous fog covering the floor. A floating Lich (undead wizard) in tattered robes casting a purple spell. Glowing runes in the air.",
                imageUrl: "https://placehold.co/900x500/003300/00ff00?text=El+Lich+Menor",
                options: [
                    { 
                        text: "Contrahechizo: Disipar Magia (Solo Mago).", 
                        nextNode: 14, 
                        requiredClass: CLASS_TYPES.MAGE 
                    },
                    { 
                        text: "Invocar Fuego Sagrado (Solo Clérigo).", 
                        nextNode: 14, 
                        requiredClass: CLASS_TYPES.CLERIC 
                    },
                    { 
                        text: "Cargar contra el Lich antes de que termine el hechizo.", 
                        nextNode: 22 // Muerte probable o mucho daño
                    }
                ]
            },
            {
                id: 14,
                text: "<p>La magia del Lich se rompe en mil pedazos. El no-muerto chilla mientras su forma física se desintegra. La barrera cae.</p><p>Entre sus restos encuentras la Llave de las Sombras, necesaria para descender más.</p>",
                imageGenerationPrompt: "Magical explosion. The Lich disintegrating into dust. A glowing key hovering in the air where the enemy was. Blue magical residue.",
                imageUrl: "https://placehold.co/900x500/000044/cyan?text=Lich+Derrotado",
                options: [
                    { text: "Usar la llave y descender.", nextNode: 15 }
                ]
            },

            // --- FASE 3: EL LABERINTO DE SOMBRAS (Plantas 7-9) - SIGILO ---
            {
                id: 15,
                text: "<p>La llave abre una puerta de obsidiana. Entras en el Laberinto de los Susurros. No hay luz aquí, y el suelo está lleno de cables trampa invisibles y placas de presión.</p><p>Escuchas la respiración de asesinos invisibles acechando en el techo.</p>",
                imageGenerationPrompt: "Pitch black corridor with faint moonlight streaks. Reflections of tripwires. Subtle silhouettes of assassins on the ceiling. Tense atmosphere.",
                imageUrl: "https://placehold.co/900x500/111/333?text=Laberinto+Mortal",
                options: [
                    { 
                        text: "Desactivar la red de trampas y pasar sigilosamente (Solo Pícaro).", 
                        nextNode: 16, 
                        requiredClass: CLASS_TYPES.ROGUE 
                    },
                    { 
                        text: "Detectar a los asesinos por el sonido de su respiración (Solo Explorador).", 
                        nextNode: 16, 
                        requiredClass: CLASS_TYPES.RANGER 
                    },
                    { 
                        text: "Iluminar la sala con magia (Atraerá a todos).", 
                        nextNode: 21 
                    },
                    { 
                        text: "Correr con el escudo en alto.", 
                        nextNode: 21 
                    }
                ]
            },
            {
                id: 16,
                text: "<p>Te mueves como un fantasma. Los asesinos no te detectan hasta que es demasiado tarde, o simplemente los evitas. Llegas a la gran puerta final.</p><p>Detrás de ella sientes una presencia abrumadora. El Señor Oscuro te espera.</p>",
                imageGenerationPrompt: "Huge demonic door. Red light pulsing from the cracks. The hero standing small in front of it. Final boss preparation.",
                imageUrl: "https://placehold.co/900x500/220000/FF4500?text=La+Puerta+Final",
                options: [
                    { text: "Entrar y enfrentar el destino.", nextNode: 18 }
                ]
            },

            // --- FASE 4: EL TRONO DEL SEÑOR OSCURO (Planta 10) - CLÍMAX ---
            {
                id: 18,
                text: "<p><strong>MALAKAR, EL SEÑOR DEL VACÍO</strong> se alza ante ti en su trono de huesos negros. Mide tres metros y su armadura supura oscuridad pura.</p><p><em>'¿Un simple mortal osa desafiarme?'</em> —su voz retumba en tu mente—.</p><p>Malakar carga energía para un ataque final que destruirá tu alma. Solo tienes UNA oportunidad.</p>",
                imageGenerationPrompt: "Final Boss. Malakar, a giant void lord in spiked black armor. His face is a swirling vortex of purple energy. Sitting on a throne of bones. Raising a hand charging a massive dark energy ball. Epic scale.",
                imageUrl: "https://placehold.co/900x500/000/800080?text=MALAKAR+BOSS+FINAL",
                options: [
                    { 
                        text: "Ejecutar el 'Golpe del Rompe-Cielos' (GUERRERO).", 
                        nextNode: 20, 
                        requiredClass: CLASS_TYPES.WARRIOR 
                    },
                    { 
                        text: "Invocar 'Ira de los Cielos' (CLÉRIGO).", 
                        nextNode: 20, 
                        requiredClass: CLASS_TYPES.CLERIC 
                    },
                    { 
                        text: "Lanzar 'Desintegración Arcana' (MAGO).", 
                        nextNode: 20, 
                        requiredClass: CLASS_TYPES.MAGE 
                    },
                    { 
                        text: "Usar 'Daga Fantasma' en el punto débil (PÍCARO).", 
                        nextNode: 20, 
                        requiredClass: CLASS_TYPES.ROGUE 
                    },
                    { 
                        text: "Disparo 'Perforador de Corazones' (EXPLORADOR).", 
                        nextNode: 20, 
                        requiredClass: CLASS_TYPES.RANGER 
                    },
                    { 
                        text: "Intentar dialogar...", 
                        nextNode: 23 // Muerte instantánea
                    }
                ]
            },

            // --- FINALES Y MUERTES ---
            {
                id: 20,
                text: "<p>¡IMPACTO CRÍTICO!</p><p>Tu ataque conecta perfectamente antes de que Malakar pueda lanzar su hechizo. La energía del vacío implosiona. Con un grito que desgarra la realidad, el Señor Oscuro se disuelve en la nada.</p><p>La mazmorra comienza a temblar. El mal ha sido purgado. Eres una leyenda.</p><h2>¡VICTORIA!</h2>",
                imageGenerationPrompt: "Ending scene. The boss exploding in a flash of white light. The hero standing victorious in silhouette. Treasure falling from the ceiling. Credits style.",
                imageUrl: "https://placehold.co/900x500/FFD700/FFF?text=LEYENDA+VIVA",
                options: [
                    { text: "Jugar Nueva Partida (NG+)", nextNode: 1, action: 'RESET' }
                ]
            },
            {
                id: 21,
                text: "<p>Sobrevives, pero a un coste terrible. Estás gravemente herido, tu armadura rota y tu espíritu quebrantado. Te arrastras hacia la siguiente sala, sabiendo que el próximo error será el último.</p>",
                imageGenerationPrompt: "Hero badly wounded leaning against a wall. Bandages, broken sword hilt. Dark gloomy atmosphere.",
                imageUrl: "https://placehold.co/900x500/400/000?text=Herido+de+Gravedad",
                options: [
                    { text: "Continuar cojeando...", nextNode: 13 } // Loop de vuelta a la trama principal pero "herido" (simulado)
                ]
            },
            {
                id: 22,
                text: "<p>El hechizo del Lich te golpea de lleno. Sientes como tu fuerza vital es drenada en segundos. Te conviertes en una estatua más de su colección.</p>",
                imageGenerationPrompt: "Game Over screen. A stone statue looking like the hero with a terrified expression. Green fog around.",
                imageUrl: "https://placehold.co/900x500/000/00FF00?text=GAME+OVER",
                options: [
                    { text: "Reintentar", nextNode: 1, action: 'RESET' }
                ]
            },
            {
                id: 23,
                text: "<p>Malakar ríe. <em>'Patético'</em>. Con un chasquido de dedos, tu existencia es borrada de la historia. Nadie recordará tu nombre.</p>",
                imageGenerationPrompt: "Void. Total blackness with two purple eyes looking down. Text implies total annihilation.",
                imageUrl: "https://placehold.co/900x500/000/FFF?text=ANIQUILADO",
                options: [
                    { text: "Reintentar", nextNode: 1, action: 'RESET' }
                ]
            }
        ];

        /**
         * ------------------------------------------------------------------
         * MOTOR DEL JUEGO (GAME ENGINE)
         * ------------------------------------------------------------------
         */

        const ui = {
            img: document.getElementById('scene-image'),
            text: document.getElementById('narrative'),
            options: document.getElementById('options'),
            prompt: document.getElementById('prompt-display'),
            classLabel: document.getElementById('ui-class')
        };

        function initGame() {
            renderNode(STATE.currentNodeId);
        }

        function renderNode(nodeId) {
            // 1. Buscar el nodo en el array (Data-Driven)
            const node = storyNodes.find(n => n.id === nodeId);
            
            if (!node) {
                console.error("Nodo no encontrado:", nodeId);
                return;
            }

            // 2. Actualizar Imagen y Prompt (con efecto de carga)
            ui.img.classList.add('loading');
            setTimeout(() => {
                ui.img.src = node.imageUrl;
                ui.prompt.textContent = `PROMPT: ${node.imageGenerationPrompt}`; // Para tu uso como diseñador
                ui.img.onload = () => ui.img.classList.remove('loading');
            }, 300);

            // 3. Renderizar Texto
            ui.text.innerHTML = node.text;

            // 4. Renderizar Opciones
            ui.options.innerHTML = '';
            
            node.options.forEach(option => {
                // FILTRADO ESTRICTO: Si la opción requiere una clase específica y no la tenemos, la saltamos por completo.
                if (option.requiredClass && option.requiredClass !== STATE.playerClass) {
                    return; // No renderizar nada
                }
                
                const btn = document.createElement('div');
                btn.className = 'btn-choice';
                
                // Como ya filtramos antes, aquí siempre añadimos el evento click
                btn.onclick = () => selectOption(option);

                if (option.setClass) {
                    btn.classList.add('class-option');
                }

                btn.innerHTML = option.text;
                ui.options.appendChild(btn);
            });
        }

        function selectOption(option) {
            // Manejo de acciones especiales (Set Class / Reset)
            if (option.setClass) {
                STATE.playerClass = option.setClass;
                ui.classLabel.textContent = `Clase: ${STATE.playerClass.toUpperCase()}`;
                ui.classLabel.style.borderColor = getThemeColor(STATE.playerClass);
                ui.classLabel.style.color = getThemeColor(STATE.playerClass);
            }

            if (option.action === 'RESET') {
                STATE.playerClass = null;
                ui.classLabel.textContent = "Clase: Ninguna";
                ui.classLabel.style.borderColor = "#b45309";
                ui.classLabel.style.color = "#b45309";
            }

            // Navegación
            if (option.nextNode) {
                STATE.currentNodeId = option.nextNode;
                renderNode(STATE.currentNodeId);
            }
        }

        // Helper estético
        function getThemeColor(cls) {
            switch(cls) {
                case CLASS_TYPES.MAGE: return '#3b82f6'; // Azul
                case CLASS_TYPES.ROGUE: return '#10b981'; // Verde Esmeralda
                case CLASS_TYPES.WARRIOR: return '#ef4444'; // Rojo
                case CLASS_TYPES.CLERIC: return '#facc15'; // Amarillo/Dorado
                case CLASS_TYPES.RANGER: return '#65a30d'; // Verde Bosque/Oliva
                default: return '#b45309';
            }
        }
        
        function capitalizeFirstLetter(string) {
            return string.charAt(0).toUpperCase() + string.slice(1);
        }

        // Arrancar
        window.onload = initGame;

    </script>
</body>
</html>
